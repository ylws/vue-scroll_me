"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},_createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var l=e[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(e,s,l){return s&&t(e.prototype,s),l&&t(e,l),e}}(),CFCMScroll=function(){function t(e){_classCallCheck(this,t),this.initVal(e)}return _createClass(t,[{key:"initVal",value:function(t){var e={father:"scrollfather1",fatherclass:"scrollfather",soncontent:"scrollson",scroll_y:"scroll_y",scroll_ymove:"scroll_ymove",scroll_x:"scroll_x",scroll_xmove:"scroll_xmove",wheelxory:"wheely",wheelval:0,marginstep:10,marginstepbole:8,getfatherid:"whichscroll",scrolltop:"top",resetinit:0,touchpreventDefault:!1,mousewheelflag:!0,getfatheridPosition:document.body,scrollels:""},s={hei_father:0,hei_f_offhei:0,hei_f_offleft:0,hei_soncontent:0,hei_scrolly:0,hei_nowposition_y:0,hei_scrolltop_y:0,hei_nowposition_y_up:0,hei_click_top:0,hei_scroll_y_height:0,hei_e_s_y_hei:0,hei_scrollheight:0,wid_father:0,wid_f_offwid:0,wid_soncontent:0,wid_scrollx:0,wid_nowposition_x:0,wid_np_x_left:0,wid_scrollleft_x:0,wid_click_left:0,wid_scroll_x_width:0,wid_e_s_wid:0,wid_scrollwidth:0};this.cfg={},_extends(this.cfg,e,s,t),this.domFn();var l=this.cfg;if(1!=l.marginstep&&"true"!=l.marginstep||(l.marginstep=this.getIdClass(l.father,l.soncontent).clientHeight/this.getId(l.father).clientHeight*5,l.marginstep<=5&&(l.marginstep=5)),!l.resetinit)return"none"!=this.getId(l.father).style.display&&(this.offsetval(),void this.init());"wheely"==l.wheelxory?(this.getIdClass(l.father,l.soncontent).style.marginTop="0px",this.getIdClass(l.father,l.scroll_y).style.top="0px"):"wheelx"==l.wheelxory&&(this.getIdClass(l.father,l.soncontent).style.marginLeft="0px",this.getIdClass(l.father,l.scroll_x).style.left="0px")}},{key:"domFn",value:function(){var t=this.cfg;t.showObj=this.getId(t.father),t.showObj.setAttribute("class",t.fatherclass)}},{key:"offsetval",value:function(){var t=this.cfg;if(!this.getId(t.father))return!1;t.hei_f_offhei=this.getoffset(this.getId(t.father)).top,t.hei_father=this.getId(t.father).clientHeight,t.hei_soncontent=this.getIdClass(t.father,t.soncontent).clientHeight,t.wid_f_offwid=this.getoffset(this.getId(t.father)).left,t.wid_father=this.getId(t.father).clientWidth,t.wid_soncontent=this.getIdClass(t.father,t.soncontent).clientWidth,this.getIdClass(t.father,t.scroll_ymove).style.height=this.getId(t.father).clientHeight,this.getIdClass(t.father,t.scroll_ymove).style.width=this.getId(t.father).clientWidth,t.hei_father<t.hei_soncontent?(this.getIdClass(t.father,t.scroll_ymove).style.display="block",this.getIdClass(t.father,t.scroll_y).style.display="block",t.hei_scrolly=t.hei_father*(t.hei_father/t.hei_soncontent),this.getIdClass(t.father,t.scroll_y).style.height=t.hei_scrolly+"px"):(this.getIdClass(t.father,t.scroll_ymove).style.display="none",this.getIdClass(t.father,t.scroll_y).style.display="none"),t.wid_father<t.wid_soncontent?(this.getIdClass(t.father,t.scroll_xmove).style.display="block",this.getIdClass(t.father,t.scroll_x).style.display="block",t.wid_scrollx=t.wid_father*(t.wid_father/t.wid_soncontent),this.getIdClass(t.father,t.scroll_x).style.width=t.wid_scrollx+"px"):(this.getIdClass(t.father,t.scroll_xmove).style.display="none",this.getIdClass(t.father,t.scroll_x).style.display="none")}},{key:"getId",value:function(t){return document.getElementById(t)}},{key:"getIdClass",value:function(t,e){return document.getElementById(t).querySelector("."+e)}},{key:"wheely",value:function(){var t=this.cfg;"auto"!=this.getIdClass(t.father,t.scroll_y).style.display&&""!=this.getIdClass(t.father,t.scroll_y).style.display||(this.getIdClass(t.father,t.scroll_y).style.top="0px");var e=this.getIdClass(t.father,t.scroll_y).style.top;t.hei_scroll_y_height=parseFloat(""==e?0:e),t.hei_e_s_y_hei=parseInt(t.hei_father-t.hei_scrolly);var s=(t.hei_soncontent-t.hei_father)/t.hei_e_s_y_hei;t.hei_scrollheight=t.hei_scroll_y_height*s,t.wheelval>=0?t.hei_scroll_y_height>=t.hei_e_s_y_hei?(this.getIdClass(t.father,t.scroll_y).style.top=t.hei_e_s_y_hei+"px",t.hei_scroll_y_height=t.hei_e_s_y_hei,this.getIdClass(t.father,t.soncontent).style.marginTop=-t.hei_soncontent+t.hei_father+"px"):parseFloat(this.getIdClass(t.father,t.scroll_y).style.top)+parseFloat(this.getIdClass(t.father,t.scroll_y).style.height)>=parseFloat(t.hei_father)-t.marginstep?(this.getIdClass(t.father,t.scroll_y).style.top=t.hei_e_s_y_hei+"px",t.hei_scroll_y_height=t.hei_e_s_y_hei,this.getIdClass(t.father,t.soncontent).style.marginTop=-t.hei_soncontent+t.hei_father+"px"):(this.getIdClass(t.father,t.scroll_y).style.top=(t.hei_scrollheight+t.marginstep)/s+"px",t.hei_scroll_y_height=(t.hei_scrollheight+t.marginstep)/s,this.getIdClass(t.father,t.soncontent).style.marginTop=-t.hei_scrollheight-t.marginstep+"px"):t.wheelval<0&&(t.hei_scroll_y_height<=0?(this.getIdClass(t.father,t.scroll_y).style.top="0px",t.hei_scroll_y_height=0,this.getIdClass(t.father,t.soncontent).style.marginTop="0px"):t.hei_scroll_y_height-s/t.marginstep<=0?(this.getIdClass(t.father,t.scroll_y).style.top="0px",t.hei_scroll_y_height=0,this.getIdClass(t.father,t.soncontent).style.marginTop="0px"):(this.getIdClass(t.father,t.scroll_y).style.top=(t.hei_scrollheight-t.marginstep)/s+"px",t.hei_scroll_y_height=(t.hei_scrollheight-t.marginstep)/s,this.getIdClass(t.father,t.soncontent).style.marginTop=-t.hei_scrollheight+t.marginstep+"px"))}},{key:"wheelx",value:function(){var t=this.cfg;"auto"==this.getIdClass(t.father,t.scroll_x).style.left&&(this.getIdClass(t.father,t.scroll_x).style.left="0px");var e=this.getIdClass(t.father,t.scroll_x).style.left;t.wid_scroll_x_width=parseInt(""==e?0:e),t.wid_e_s_wid=t.wid_father-t.wid_scrollx;var s=(t.wid_soncontent-t.wid_father)/t.wid_e_s_wid;t.wid_scrollwidth=t.wid_scroll_x_width*s,t.wheelval>=0?t.wid_scroll_x_width>=t.wid_e_s_wid?(this.getIdClass(t.father,t.scroll_x).style.left=t.wid_e_s_wid+"px",t.wid_scroll_x_width=t.wid_e_s_wid,this.getIdClass(t.father,t.soncontent).style.marginLeft=-t.wid_soncontent+t.wid_father+"px"):t.wid_scroll_x_width+parseInt(this.getIdClass(t.father,t.scroll_x).clientWidth)>=t.wid_father-t.marginstep?(this.getIdClass(t.father,t.scroll_x).style.left=t.wid_e_s_wid+"px",t.wid_scroll_x_width=t.wid_e_s_wid,this.getIdClass(t.father,t.soncontent).style.marginLeft=-t.wid_soncontent+t.wid_father+"px"):(this.getIdClass(t.father,t.scroll_x).style.left=(t.wid_scrollwidth+t.marginstep)/s+"px",t.wid_scroll_x_width=(t.wid_scrollwidth+t.marginstep)/s,this.getIdClass(t.father,t.soncontent).style.marginLeft=-t.wid_scrollwidth-t.marginstep+"px"):t.wheelval<0&&(t.wid_scroll_x_width<=0?(this.getIdClass(t.father,t.scroll_x).style.left="0px",t.wid_scroll_x_width=0,this.getIdClass(t.father,t.soncontent).style.marginLeft="0px"):t.wid_scroll_x_width-s/t.marginstep<=0?(this.getIdClass(t.father,t.scroll_x).style.left="0px",t.wid_scroll_x_width=0,this.getIdClass(t.father,t.soncontent).style.marginLeft="0px"):(this.getIdClass(t.father,t.scroll_x).style.left=(t.wid_scrollwidth-t.marginstep)/s+"px",t.wid_scroll_x_width=(t.wid_scrollwidth-t.marginstep)/s,this.getIdClass(t.father,t.soncontent).style.marginLeft=-t.wid_scrollwidth+this.cfg.marginstep+"px"))}},{key:"scrollings",value:function(){for(var t=this.cfg,e=this,s=this.getId(t.father).querySelectorAll("."+t.soncontent),l=0;l<s.length;l++)s[l].onmouseenter=function(){var s=this.parentElement.getAttribute("id");t.father=s,e.getId(t.getfatherid).value=s,t.wheelxory=e.getId(s).getAttribute("wheelxory")}}},{key:"onmouseclick",value:function(){var t=this.cfg;if(!navigator.userAgent.match(/(iPhone|Android|iPad)/i)){var e,s;e=this.getId(t.getfatherid).value,this.getId(e).clientWidth,this.getId(e).clientHeight,s=!1;var l=this;this.getId(e).querySelector("."+t.scroll_y).onmousedown=function(e){(e=window.event||e).preventDefault?e.preventDefault():e.returnValue=!1,s=!0,t.hei_nowposition_y=e.pageY||e.clientY;var i=this.style.top;if("auto"==i&&(i="0px"),t.hei_scroll_y_height=parseInt(i),t.hei_click_top=t.hei_nowposition_y-t.hei_f_offhei-t.hei_scroll_y_height,s){document.onmousemove=function(e){(e=window.event||e).preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),t.hei_scroll_y_height=parseInt(l.getIdClass(t.father,t.scroll_y).style.top),t.hei_nowposition_y_up=e.pageY||e.clientY,t.hei_scrolltop_y=t.hei_nowposition_y_up-t.hei_f_offhei-t.hei_click_top,t.hei_e_s_y_hei=t.hei_father-t.hei_scrolly,t.hei_soncontent=l.getIdClass(t.father,t.soncontent).clientHeight,t.hei_father=l.getId(t.father).clientHeight,t.hei_scrollheight=t.hei_scroll_y_height*((t.hei_soncontent-t.hei_father)/t.hei_e_s_y_hei),t.hei_scrolltop_y<=0?(l.getIdClass(t.father,t.scroll_y).style.top="0px",l.getIdClass(t.father,t.soncontent).style.marginTop="0px"):t.hei_scrolltop_y>=t.hei_e_s_y_hei?(l.getIdClass(t.father,t.scroll_y).style.top=t.hei_e_s_y_hei+"px",l.getIdClass(t.father,t.soncontent).style.marginTop=-(t.hei_soncontent-t.hei_father)+"px"):(l.getIdClass(t.father,t.scroll_y).style.top=t.hei_scrolltop_y+"px",l.getIdClass(t.father,t.soncontent).style.marginTop=-t.hei_scrollheight+"px")}}},this.getId(e).querySelector("."+t.scroll_x).onmousedown=function(i){(i=window.event||i).preventDefault?i.preventDefault():i.returnValue=!1,s=!0,t.wid_nowposition_x=i.pageX||i.clientX;var o=this.style.left;"auto"!=o&&""!=o||(o="0px"),t.wid_scroll_x_width=parseInt(o),t.wid_click_left=t.wid_nowposition_x-t.wid_f_offwid-t.wid_scroll_x_width,s&&(document.onmousemove=function(s){(s=window.event||s).preventDefault?(s.preventDefault(),s.stopPropagation()):(s.returnValue=!1,s.cancelBubble=!0),t.wid_scroll_x_width=parseInt(l.getIdClass(e,t.scroll_x).style.left),t.wid_np_x_left=s.pageX||s.clientX,t.wid_scrollleft_x=t.wid_np_x_left-t.wid_f_offwid-t.wid_click_left,t.wid_e_s_wid=t.wid_father-t.wid_scrollx,t.wid_soncontent=l.getIdClass(e,t.soncontent).clientWidth,t.wid_father=l.getId(e).clientWidth,t.wid_scrollwidth=t.wid_scroll_x_width*((t.wid_soncontent-t.wid_father)/t.wid_e_s_wid),t.wid_scrollleft_x<=0?(l.getIdClass(e,t.scroll_x).style.left="0px",l.getIdClass(e,t.soncontent).style.marginLeft="0px"):t.wid_scrollleft_x>=t.wid_e_s_wid?(l.getIdClass(e,t.scroll_x).style.left=t.wid_e_s_wid+"px",l.getIdClass(e,t.soncontent).style.marginLeft=-(t.wid_soncontent-t.wid_father)+"px"):(l.getIdClass(e,t.scroll_x).style.left=t.wid_scrollleft_x+"px",l.getIdClass(e,t.soncontent).style.marginLeft=-t.wid_scrollwidth+"px")})},document.onmouseup=function(){s=!1,document.onmousemove=null}}}},{key:"addElement",value:function(){var t=this.cfg;if(this.offsetval(),"wheely"==t.wheelxory){t.hei_scrolly=t.hei_father*(t.hei_father/t.hei_soncontent),this.getIdClass(t.father,t.scroll_y).style.height=t.hei_scrolly+"px",t.hei_e_s_y_hei=parseInt(t.hei_father-t.hei_scrolly);var e=(t.hei_soncontent-t.hei_father)/t.hei_e_s_y_hei,s=Math.abs(parseFloat(this.getIdClass(t.father,t.soncontent).style.marginTop));this.getIdClass(t.father,t.scroll_y).style.top=s/e+"px",t.hei_scroll_y_height=s/e}else if("wheelx"==t.wheelxory){t.wid_scrollx=t.wid_father*(t.wid_father/t.wid_soncontent),this.getIdClass(t.father,t.scroll_x).style.width=t.wid_scrollx+"px",this.wid_e_s_x_wid=parseInt(t.wid_father-t.wid_scrollx);e=(t.wid_soncontent-t.wid_father)/this.wid_e_s_x_wid,Math.abs(parseFloat(this.getIdClass(t.father,t.soncontent).style.marginLeft));this.getIdClass(t.father,t.scroll_x).style.left=s/e+"px",t.wid_scroll_x_width=s/e}if("top"==t.scrolltop)this.getIdClass(t.father,t.soncontent).style.marginTop="0px",this.getIdClass(t.father,t.scroll_y).style.top="0px";else if("bottom"==t.scrolltop&&this.getId(t.father).clientHeight<=this.getIdClass(t.father,t.soncontent).clientHeight){var l=this.getId(t.father).clientHeight-this.getIdClass(t.father,t.scroll_y).clientHeight,i=this.getIdClass(t.father,t.soncontent).clientHeight-this.getId(t.father).clientHeight;this.getIdClass(t.father,t.soncontent).style.marginTop=-i+"px",this.getIdClass(t.father,t.scroll_y).style.top=l+"px"}}},{key:"scrollFunc",value:function(t){var e=t.cfg;return function(s){if(!t.getId(t.cfg.getfatherid))return!1;var l,i,o,h,r,n=window.event||s;e.scrollels?(l=(n.pageX||n.clientX)+document.querySelector(e.scrollels).scrollLeft,i=(n.pageY||n.clientY)+document.querySelector(e.scrollels).scrollTop):(l=(n.pageX||n.clientX)+document.body.scrollLeft,i=(n.pageY||n.clientY)+document.body.scrollTop),r=t.getId(t.cfg.getfatherid).value;var a=t.getId(r).clientHeight,c=t.getId(r).clientWidth,_=t.getIdClass(r,t.cfg.soncontent).clientHeight,d=t.getIdClass(r,t.cfg.soncontent).clientWidth;if(t.getIdClass(r,t.cfg.soncontent).style.transitionDuration="0s",(a<_&&"wheely"==t.cfg.wheelxory||a>_&&"wheely"==t.cfg.wheelxory&&top.location.href!=location.href||c<d&&"wheelx"==t.cfg.wheelxory||c>d&&"wheelx"==t.cfg.wheelxory&&top.location.href!=location.href)&&void 0!=document.getElementById(r).offsetTop&&(h=t.getoffset(t.getId(r)).top,o=t.getoffset(t.getId(r)).left,void 0==l&&(l=o),void 0==i&&(i=h),l>=o&&l<=o+d&&i>=h&&i<=h+_)){if(n.wheelDelta){f=parseInt(n.wheelDelta);t.cfg.father=r,t.cfg.wheelval=f>0?-1:1}else if(n.detail){var f=parseInt(n.detail);t.cfg.father=r,t.cfg.wheelval=f>=0?1:-1}t.offsetval(),"wheely"==e.wheelxory?t.wheely():"wheelx"==e.wheelxory&&t.wheelx()}}}},{key:"getStyle",value:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}},{key:"getoffset",value:function(t,e){if(null==t)return e;e||((e={}).top=0,e.left=0);var s=this.getStyle(t,"position");if("absolute"==s||"relative"==s){if(t.getBoundingClientRect&&null!=navigator.userAgent.toLowerCase().match(/.(msie)/))return e.top+=t.getBoundingClientRect.top,e.left+=t.getBoundingClientRect.left,e;e.top+=t.offsetTop,e.left+=t.offsetLeft}else e.top+=0,e.left+=0;return this.getoffset(t.parentElement,e)}},{key:"init",value:function(){var t=this,e=this.cfg;if(!document.querySelector("."+e.getfatherid)){var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("class",e.getfatherid),s.setAttribute("id",e.getfatherid),s.setAttribute("value",e.father),e.getfatheridPosition.appendChild(s)}this.getId(e.father).setAttribute("wheelxory",e.wheelxory),this.getId(e.getfatherid).value=e.father,this.scrollings(),this.addElement(),this.onmouseclick();var l=document.getElementById(e.father);if(navigator.userAgent.match(/(iPhone|Android|iPad|Mobile|uc)/i)){t=this;l.addEventListener("touchstart",function(){t.touchStart(t)},!1),l.addEventListener("touchmove",function(){t.touchMove(t)},!1),l.addEventListener("touchend",function(){t.touchEnd(t)},!1)}else document.addEventListener&&(null!=navigator.userAgent.toLowerCase().match(/firefox/)?l.addEventListener("DOMMouseScroll",function(e){e.preventDefault(),t.scrollFunc(t)(e)},!1):l.onmousewheel=function(e){e.preventDefault(),t.scrollFunc(t)(e)});if("top"==e.scrolltop)this.getIdClass(e.father,e.soncontent).style.marginTop="0px",this.getIdClass(e.father,e.scroll_y).style.top="0px";else if("bottom"==e.scrolltop&&this.getId(e.father).clientHeight<=this.getIdClass(e.father,e.soncontent).clientHeight){var i=this.getId(e.father).clientHeight-this.getIdClass(e.father,e.scroll_y).clientHeight,o=this.getIdClass(e.father,e.soncontent).clientHeight-this.getId(e.father).clientHeight;this.getIdClass(e.father,e.soncontent).style.marginTop=-o+"px",this.getIdClass(e.father,e.scroll_y).style.top=i+"px"}}},{key:"touchStart",value:function(){var t=this.cfg,s=window.event||e;t.touchpreventDefault&&(document.body.ontouchstart=function(t){var e=window.event||t;e.preventDefault(),e.stopPropagation()},s.preventDefault()),t.wheelxory=this.getId(t.father).getAttribute("wheelxory"),window.touch=s.touches[0];var l=Number(touch.pageX),i=Number(touch.pageY);this.startX=l,this.startY=i,this.lastX=l,this.lastY=i}},{key:"touchMove",value:function(t){var e=this.cfg,s=window.event||t,l=(e.father,this.getId(e.father).clientHeight),i=this.getId(e.father).clientWidth,o=this.getIdClass(e.father,e.soncontent).clientHeight,h=this.getIdClass(e.father,e.soncontent).clientWidth;if(l>=o&&"wheely"==e.wheelxory||i>h&&"wheelx"==e.wheelxory)return!1;e.touchpreventDefault&&(document.body.ontouchmove=function(t){var e=window.event||t;e.preventDefault(),e.stopPropagation()},s.preventDefault());var r=s.touches[0];this.lastX=Number(r.pageX),this.lastY=Number(r.pageY);var n,a;n=this.lastY-this.startY,a=this.lastX-this.startX,Math.abs(n)>Math.abs(a)?e.wheelval=n>=0?-1:1:e.wheelval=a>=0?-1:1,this.offsetval(),"wheely"==e.wheelxory?this.wheely():"wheelx"==e.wheelxory&&this.wheelx()}},{key:"touchEnd",value:function(t){window.event;var e=this.cfg;e.touchpreventDefaultflag=!0,(Math.abs(this.lastY)-Math.abs(this.startY)>=5||Math.abs(this.lastX)-Math.abs(this.startX)>=5)&&(e.touchpreventDefaultflag=!1),document.body.ontouchstart=null,document.body.ontouchmove=null,window.scrollTouchPreventDefault&&e.touchpreventDefaultflag&&window.scrollTouchPreventDefault(e.father)}}]),t}();
export function CFCMScroll(param) {
	return new CFCMScroll(param)
}